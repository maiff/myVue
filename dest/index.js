'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

class Observer {
  constructor (data) {
    this.data = data;
    this.walk(data);
  }

  walk (obj) {
    let val;
    for (let key in obj) {
      if (obj.hasOwnProperty(key)) {
        val = obj[key];

        if (typeof val === 'object') {
          new Observer(val);
        }

        this.convert(key, val);
      }
    }
  }

  convert (key, val) {
    Object.defineProperty(this.data, key, {
      enumerable: true,
      configurable: true,
      get: function () {
        console.log('你访问了' + key);
        return val
      },
      set: function (newVal) {
        console.log('你设置了' + key);
        console.log('新的' + key + ' = ' + newVal);
        if (newVal === val) return
        val = newVal;
      }
    });
  }
}

exports.Observer = Observer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9vYnNlcnZlci9PYnNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBPYnNlcnZlciB7XHJcbiAgY29uc3RydWN0b3IgKGRhdGEpIHtcclxuICAgIHRoaXMuZGF0YSA9IGRhdGFcclxuICAgIHRoaXMud2FsayhkYXRhKVxyXG4gIH1cclxuXHJcbiAgd2FsayAob2JqKSB7XHJcbiAgICBsZXQgdmFsXHJcbiAgICBmb3IgKGxldCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgIHZhbCA9IG9ialtrZXldXHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgbmV3IE9ic2VydmVyKHZhbClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29udmVydChrZXksIHZhbClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29udmVydCAoa2V5LCB2YWwpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmRhdGEsIGtleSwge1xyXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfkvaDorr/pl67kuoYnICsga2V5KVxyXG4gICAgICAgIHJldHVybiB2YWxcclxuICAgICAgfSxcclxuICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+S9oOiuvue9ruS6hicgKyBrZXkpXHJcbiAgICAgICAgY29uc29sZS5sb2coJ+aWsOeahCcgKyBrZXkgKyAnID0gJyArIG5ld1ZhbClcclxuICAgICAgICBpZiAobmV3VmFsID09PSB2YWwpIHJldHVyblxyXG4gICAgICAgIHZhbCA9IG5ld1ZhbFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgT2JzZXJ2ZXJcclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNLFFBQVEsQ0FBQztFQUNiLFdBQVcsQ0FBQyxDQUFDLElBQUksRUFBRTtJQUNqQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtJQUNoQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO0dBQ2hCOztFQUVELElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRTtJQUNULElBQUksR0FBRyxDQUFBO0lBQ1AsS0FBSyxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQUU7TUFDbkIsSUFBSSxHQUFHLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQzNCLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7O1FBRWQsSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLEVBQUU7VUFDM0IsSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUE7U0FDbEI7O1FBRUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUE7T0FDdkI7S0FDRjtHQUNGOztFQUVELE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7SUFDakIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRTtNQUNwQyxVQUFVLEVBQUUsSUFBSTtNQUNoQixZQUFZLEVBQUUsSUFBSTtNQUNsQixHQUFHLEVBQUUsWUFBWTtRQUNmLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFBO1FBQ3pCLE9BQU8sR0FBRztPQUNYO01BQ0QsR0FBRyxFQUFFLFVBQVUsTUFBTSxFQUFFO1FBQ3JCLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFBO1FBQ3pCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUE7UUFDeEMsSUFBSSxNQUFNLEtBQUssR0FBRyxFQUFFLE1BQU07UUFDMUIsR0FBRyxHQUFHLE1BQU0sQ0FBQTtPQUNiO0tBQ0YsQ0FBQyxDQUFBO0dBQ0g7Q0FDRixBQUVELEFBQXVCLDs7In0=
